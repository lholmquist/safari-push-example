/*! AeroGear JavaScript Library - v2.0.0 - 2014-10-23
* https://github.com/aerogear/aerogear-js
* JBoss, Home of Professional Open Source
* Copyright Red Hat, Inc., and individual contributors
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
* http://www.apache.org/licenses/LICENSE-2.0
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
!function(a,b){this.AeroGear={},AeroGear.Core=function(){if(this instanceof AeroGear.Core)throw"Invalid instantiation of base class AeroGear.Core";this.add=function(a){var b,c,d=this[this.collectionName]||{};if(this[this.collectionName]=d,!a)return this;if("string"==typeof a)d[a]=AeroGear[this.lib].adapters[this.type](a,this.config);else if(Array.isArray(a))for(b=0;b<a.length;b++)c=a[b],"string"==typeof c?d[c]=AeroGear[this.lib].adapters[this.type](c,this.config):c.name&&(c.settings=AeroGear.extend(c.settings||{},this.config),d[c.name]=AeroGear[this.lib].adapters[c.type||this.type](c.name,c.settings));else{if(!a.name)return this;a.settings=AeroGear.extend(a.settings||{},this.config),d[a.name]=AeroGear[this.lib].adapters[a.type||this.type](a.name,a.settings)}return this[this.collectionName]=d,this},this.remove=function(a){var b,c,d=this[this.collectionName]||{};if("string"==typeof a)delete d[a];else if(Array.isArray(a))for(b=0;b<a.length;b++)c=a[b],"string"==typeof c?delete d[c]:delete d[c.name];else a&&delete d[a.name];return this[this.collectionName]=d,this}},AeroGear.extend=function(){var a,b,c,d=arguments[0];for(b=1;b<arguments.length;b++){c=arguments[b];for(a in c)d[a]=c[a]}return d},function(){var c,d,e,f;!function(){var a={},b={};c=function(b,c,d){a[b]={deps:c,callback:d}},f=e=d=function(c){function e(a){if("."!==a.charAt(0))return a;for(var b=a.split("/"),d=c.split("/").slice(0,-1),e=0,f=b.length;f>e;e++){var g=b[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(f._eak_seen=a,b[c])return b[c];if(b[c]={},!a[c])throw new Error("Could not find module "+c);for(var g,h=a[c],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)k.push("exports"===i[l]?g={}:d(e(i[l])));var n=j.apply(this,k);return b[c]=g||n}}(),c("promise/all",["./utils","exports"],function(a,b){"use strict";function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to all.");return new b(function(b,c){function d(a){return function(b){f(a,b)}}function f(a,c){h[a]=c,0===--i&&b(h)}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++)g=a[j],g&&e(g.then)?g.then(d(j),c):f(j,g)})}var d=a.isArray,e=a.isFunction;b.all=c}),c("promise/asap",["exports"],function(b){"use strict";function c(){return function(){process.nextTick(f)}}function d(){var a=0,b=new j(f),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function e(){return function(){k.setTimeout(f,1)}}function f(){for(var a=0;a<l.length;a++){var b=l[a],c=b[0],d=b[1];c(d)}l=[]}function g(a,b){var c=l.push([a,b]);1===c&&h()}var h,i="undefined"!=typeof a?a:{},j=i.MutationObserver||i.WebKitMutationObserver,k="undefined"!=typeof global?global:this,l=[];h="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?c():j?d():e(),b.asap=g}),c("promise/cast",["exports"],function(a){"use strict";function b(a){if(a&&"object"==typeof a&&a.constructor===this)return a;var b=this;return new b(function(b){b(a)})}a.cast=b}),c("promise/config",["exports"],function(a){"use strict";function b(a,b){return 2!==arguments.length?c[a]:void(c[a]=b)}var c={instrument:!1};a.config=c,a.configure=b}),c("promise/polyfill",["./promise","./utils","exports"],function(b,c,d){"use strict";function e(){var b="Promise"in a&&"cast"in a.Promise&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),g(b)}();b||(a.Promise=f)}var f=b.Promise,g=c.isFunction;d.polyfill=e}),c("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(a,c,d,e,f,g,h,i,j){"use strict";function k(a){if(!x(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof k))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],l(a,this)}function l(a,b){function c(a){q(b,a)}function d(a){s(b,a)}try{a(c,d)}catch(e){d(e)}}function m(a,b,c,d){var e,f,g,h,i=x(c);if(i)try{e=c(d),g=!0}catch(j){h=!0,f=j}else e=d,g=!0;p(b,e)||(i&&g?q(b,e):h?s(b,f):a===G?q(b,e):a===H&&s(b,e))}function n(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+G]=c,e[f+H]=d}function o(a,b){for(var c,d,e=a._subscribers,f=a._detail,g=0;g<e.length;g+=3)c=e[g],d=e[g+b],m(b,c,d,f);a._subscribers=null}function p(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(w(b)&&(d=b.then,x(d)))return d.call(b,function(d){return c?!0:(c=!0,void(b!==d?q(a,d):r(a,d)))},function(b){return c?!0:(c=!0,void s(a,b))}),!0}catch(e){return c?!0:(s(a,e),!0)}return!1}function q(a,b){a===b?r(a,b):p(a,b)||r(a,b)}function r(a,b){a._state===E&&(a._state=F,a._detail=b,v.async(t,a))}function s(a,b){a._state===E&&(a._state=F,a._detail=b,v.async(u,a))}function t(a){o(a,a._state=G)}function u(a){o(a,a._state=H)}var v=a.config,w=(a.configure,c.objectOrFunction),x=c.isFunction,y=(c.now,d.cast),z=e.all,A=f.race,B=g.resolve,C=h.reject,D=i.asap;v.async=D;var E=void 0,F=0,G=1,H=2;k.prototype={constructor:k,_state:b,_detail:b,_subscribers:b,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;v.async(function(){m(c._state,d,e[c._state-1],c._detail)})}else n(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}},k.all=z,k.cast=y,k.race=A,k.resolve=B,k.reject=C,j.Promise=k}),c("promise/race",["./utils","exports"],function(a,b){"use strict";function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to race.");return new b(function(b,c){for(var d,e=0;e<a.length;e++)d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d)})}var d=a.isArray;b.race=c}),c("promise/reject",["exports"],function(a){"use strict";function b(a){var b=this;return new b(function(b,c){c(a)})}a.reject=b}),c("promise/resolve",["exports"],function(a){"use strict";function b(a){var b=this;return new b(function(b){b(a)})}a.resolve=b}),c("promise/utils",["exports"],function(a){"use strict";function b(a){return c(a)||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}var e=Date.now||function(){return(new Date).getTime()};a.objectOrFunction=b,a.isFunction=c,a.isArray=d,a.now=e}),d("promise/polyfill").polyfill()}(),function(){var b="undefined"!=typeof a?a:exports,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=function(){try{document.createElement("$")}catch(a){return a}}();b.btoa||(b.btoa=function(a){for(var b,e,f=0,g=c,h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&b>>8-f%1*8)){if(e=a.charCodeAt(f+=.75),e>255)throw d;b=b<<8|e}return h}),b.atob||(b.atob=function(a){if(a=a.replace(/=+$/,""),a.length%4==1)throw d;for(var b,e,f=0,g=0,h="";e=a.charAt(g++);~e&&(b=f%4?64*b+e:e,f++%4)?h+=String.fromCharCode(255&b>>(-2*f&6)):0)e=c.indexOf(e);return h})}(),AeroGear.ajax=function(a){return new Promise(function(b,c){a=a||{};var d,e,f=new XMLHttpRequest,g=this,h=(a.type||"GET").toUpperCase(),i=(a.dataType||"json").toLowerCase(),j=(a.accept||"application/json").toLowerCase(),k=(a.contentType||"application/json").toLowerCase(),l=[],m=a.url,n=a.data;if(a.params)if("GET"===h||"POST"===h&&"application/x-www-form-urlencoded"===k)for(e in a.params)l.push(encodeURIComponent(e)+"="+encodeURIComponent(a.params[e]||""));else"application/json"===k&&(n=n||{},n.params=n.params||{},AeroGear.extend(n.params,a.params));if("application/x-www-form-urlencoded"===k){if(n)for(e in n)l.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]));n=l.join("&")}if("GET"===h&&l.length>0&&(m+="?"+l.join("&")),f.open(h,m,!0,a.username,a.password),f.responseType=i,f.setRequestHeader("Content-Type",k),f.setRequestHeader("Accept",j),a.headers)for(d in a.headers)f.setRequestHeader(d,a.headers[d]);f.onload=function(){var a=f.status<400?"success":"error",d=g._createPromiseValue(f,a);return"success"===a?b(d):c(d)},f.onerror=function(){var a="error";c(g._createPromiseValue(f,a))},this._createPromiseValue=function(a,b){var c=a.statusText||b,d="text"===i||""===i?a.responseText:a.response;return{data:d,statusText:c,agXHR:a}},f.send(n)})},function(b){b.UnifiedPushClient=function(c,d,e){if(!c||!d||!e)throw"UnifiedPushClientException";return this instanceof b.UnifiedPushClient?(e="/"===e.substr(-1)?e:e+"/",this.registerWithPushServer=function(f){f=f||{};var g=f.metadata||{};if(!g.deviceToken)throw"UnifiedPushRegistrationException";return g.categories=Array.isArray(g.categories)?g.categories:g.categories?[g.categories]:[],b.ajax({contentType:"application/json",dataType:"json",type:"POST",url:e+"rest/registry/device",headers:{Authorization:"Basic "+a.btoa(c+":"+d)},data:JSON.stringify(g)})},void(this.unregisterWithPushServer=function(f){return b.ajax({contentType:"application/json",dataType:"json",type:"DELETE",url:e+"rest/registry/device/"+f,headers:{Authorization:"Basic "+a.btoa(c+":"+d)}})})):new b.UnifiedPushClient(c,d,e)}}(AeroGear)}(this);
//# sourceMappingURL=aerogear.custom.min.js.map